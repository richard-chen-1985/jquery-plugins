!function(t){function e(e){this.mask=t('<div class="ui-share-mask">'),this.modal=t('<div class="ui-sharepop"><div class="ui-sharepop-hd">分享到：</div><div class="ui-sharepop-cont"><ul class="ui-share-list"></ul></div><div class="ui-sharepop-close">×</div></div>'),this.elem=e,this.init()}function i(e){this.tip=t('<div class="ui-sharetip"><div class="ui-sharetip-hd">分享到：</div><div class="ui-sharetip-cont"><ul class="ui-share-list"></ul></div><div class="ui-sharetip-arrow"><span class="arrow1"></span><span class="arrow2"></span></div></div>'),this.elem=e,this.timer=null,this.closeInterval=500,this.currentTarget=null,this.init()}var n={sinaweibo:{url:"http://v.t.sina.com.cn/share/share.php?appkey=583395093&title={{content}}&url={{url}}&source=bshare&retcode=0&pic={{pic}}",text:"新浪微博"},qqweibo:{url:"http://v.t.qq.com/share/share.php?title={{content}}&site={{url}}&pic={{pic}}&url={{url}}&appkey=dcba10cb2d574a48a16f24c9b6af610c",text:"腾讯微博"},renren:{url:"http://widget.renren.com/dialog/share?resourceUrl={{url}}&title={{content}}&images={{pic}}&description={{content}}",text:"人人网"},qzone:{url:"http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url={{url}}&title={{content}}&pics={{pic}}&summary={{content}}",text:"QQ空间"},kaixin001:{url:"http://www.kaixin001.com/rest/records.php?url={{url}}&content={{content}}&pic={{pic}}&aid=100013770&style=111",text:"开心网"},douban:{url:"http://www.douban.com/recommend/?url={{url}}&title={{content}}&v=1",text:"豆瓣"},meilishuo:{url:"http://www.meilishuo.com/meilishuo_share?siteurl={{url}}&content={{content}}",text:"美丽说"},mogujie:{url:"http://www.mogujie.com/mshare?url={{url}}&content={{content}}&from=mogujie&pic={{pic}}",text:"蘑菇街"},facebook:{url:"http://www.facebook.com/share.php?src=360buy&u={{url}}",text:"facebook"},twitter:{url:"http://twitter.com/intent/tweet?text={{content}}&url={{url}}",text:"twitter"},googleplus:{url:"https://plus.google.com/share?url={{url}}&hl=zh-CN",text:"googleplus"},pinterest:{url:"https://pinterest.com/login/?next=/pin/create/bookmarklet/?media=&url={{url}}&alt=&title={{content}}&is_video=false",text:"pinterest"}},s='<li><a href="javascript:;" class="share-btn share-{{name}}" data-name="{{name}}">{{text}}</a></li>',o=/MSIE 6/.test(navigator.userAgent),r={content:"",url:"",pic:""};e.prototype={constructor:e,init:function(){var e=[];for(var i in n)e.push(s.replace(/{{name}}/g,i).replace(/{{text}}/,n[i].text));this.modal.find(".ui-share-list").append(e.join("")),this.mask.hide().appendTo(t("body")),this.modal.hide().appendTo(t("body")),this.loadStyle(),this.bindEvents()},bindEvents:function(){var e=this,i=this.modal;this.pushElem(this.elem),i.find(".share-btn").bind("click",function(){var e=n[t(this).attr("data-name")].url;return e=e.replace(/{{content}}/g,r.content),e=e.replace(/{{url}}/g,r.url),e=e.replace(/{{pic}}/g,r.pic),window.open(e,"newwindow","width=1000,height=800,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no"),!1}),i.find(".ui-sharepop-close").bind("click",function(){e.close()}),this.mask.bind("click",function(){e.close()}),t(window).bind("resize scroll",function(){e.opened&&e.loadStyle()})},pushElem:function(t){var e=this;t.bind("click",function(){e.show()})},show:function(){this.mask.fadeIn(200),this.modal.fadeIn(200),this.opened=!0},loadStyle:function(){var e=this.modal,i=this.mask,n=document.documentElement,s=t(window).width(),r=t(window).height(),l=Math.max(n.scrollWidth,n.clientWidth),a=Math.max(n.scrollHeight,n.clientHeight),c=e.outerWidth(),h=e.outerHeight();e.css({top:(r-h)/2,left:(s-c)/2}),o&&(i.css({position:"absolute",width:l,height:a}),e.css({position:"absolute"}).get(0).style.setExpression("top","documentElement.scrollTop+(documentElement.clientHeight-this.clientHeight)/2"))},close:function(){this.mask.hide(),this.modal.hide(),this.opened=!1}},i.prototype={constructor:i,init:function(){var e=[];for(var i in n)e.push(s.replace(/{{name}}/g,i).replace(/{{text}}/,n[i].text));this.tip.find(".ui-share-list").append(e.join("")),this.tip.hide().appendTo(t("body")),this.bindEvents()},bindEvents:function(){var e=this,i=this.tip;this.pushElem(this.elem,!0),this.pushElem(i,!1),i.find(".share-btn").bind("click",function(){var e=n[t(this).attr("data-name")].url;return e=e.replace(/{{content}}/g,r.content),e=e.replace(/{{url}}/g,r.url),e=e.replace(/{{pic}}/g,r.pic),window.open(e,"newwindow","width=1000,height=800,top=0,left=0,toolbar=no,menubar=no,scrollbars=no, resizable=no,location=no, status=no"),!1}),t(window).bind("resize scroll",function(){e.currentTarget&&e.loadStyle(e.currentTarget)})},pushElem:function(e,i){var n=this;e.hover(function(){clearTimeout(n.timer),n.show(t(this),i)},function(){n.timer=setTimeout(function(){n.close()},n.closeInterval)})},show:function(t,e){e&&(this.loadStyle(t),this.currentTarget=t),this.tip.show()},loadStyle:function(t){var e=t.offset(),i=t.outerHeight();this.tip.css({top:e.top+i+6,left:e.left})},close:function(){this.tip.hide(),this.currentTarget=null}};var l={sharePop:null,createSharePop:function(t){return null===this.sharePop?this.sharePop=new e(t):this.sharePop.pushElem(t),this.sharePop},shareTip:null,createShareTip:function(t){return null===this.shareTip?this.shareTip=new i(t):this.shareTip.pushElem(t,!0),this.shareTip}};t.share=function(t){"pop"===t.type?l.createSharePop(t.elem):"tip"===t.type&&l.createShareTip(t.elem)},t.share.config=function(e){t.extend(r,e)}}(jQuery);